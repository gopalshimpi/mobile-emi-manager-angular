<div class="sales-record-container">
  <mat-card class="sales-record-card">
    <mat-card-header>
      <mat-card-title>Create Sales Record</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <form [formGroup]="salesForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Customer Name</mat-label>
            <input matInput formControlName="customer_name" placeholder="Enter customer name">
            <mat-error *ngIf="customer_name?.hasError('required')">
              Customer name is required
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Mobile IMEI Number</mat-label>
            <input matInput formControlName="mobile_imei_number" placeholder="Enter 15-digit IMEI number">
            <mat-error *ngIf="mobile_imei_number?.hasError('required')">
              IMEI number is required
            </mat-error>
            <mat-error *ngIf="mobile_imei_number?.hasError('pattern')">
              Please enter a valid 15-digit IMEI number
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Customer Mobile Number</mat-label>
            <input matInput formControlName="customer_mobile_number" placeholder="Enter 10-digit mobile number">
            <mat-error *ngIf="customer_mobile_number?.hasError('required')">
              Mobile number is required
            </mat-error>
            <mat-error *ngIf="customer_mobile_number?.hasError('pattern')">
              Please enter a valid 10-digit mobile number
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Mobile Model</mat-label>
            <input matInput formControlName="mobile_model" placeholder="Enter mobile model">
            <mat-error *ngIf="mobile_model?.hasError('required')">
              Mobile model is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Date of Purchase</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date_of_purchase">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="date_of_purchase?.hasError('required')">
              Date of purchase is required
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>PAN Number</mat-label>
            <input matInput formControlName="pan_number" placeholder="Enter PAN number">
            <mat-error *ngIf="pan_number?.hasError('required')">
              PAN number is required
            </mat-error>
            <mat-error *ngIf="pan_number?.hasError('pattern')">
              Please enter a valid PAN number
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Aadhar Number</mat-label>
            <input matInput formControlName="aadhar_number" placeholder="Enter 12-digit Aadhar number">
            <mat-error *ngIf="aadhar_number?.hasError('required')">
              Aadhar number is required
            </mat-error>
            <mat-error *ngIf="aadhar_number?.hasError('pattern')">
              Please enter a valid 12-digit Aadhar number
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Price</mat-label>
            <input matInput type="number" formControlName="price" placeholder="Enter price">
            <mat-error *ngIf="price?.hasError('required')">
              Price is required
            </mat-error>
            <mat-error *ngIf="price?.hasError('min')">
              Price must be greater than 0
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Down Payment Amount</mat-label>
            <input matInput type="number" formControlName="down_payment_amount" placeholder="Enter down payment amount">
            <mat-error *ngIf="down_payment_amount?.hasError('required')">
              Down payment amount is required
            </mat-error>
            <mat-error *ngIf="down_payment_amount?.hasError('min')">
              Down payment amount must be greater than 0
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Pending Amount</mat-label>
            <input matInput formControlName="pending_amount" placeholder="Pending amount" readonly>
            <mat-error *ngIf="pending_amount?.hasError('required')">
              Pending amount is required
            </mat-error>
            <mat-error *ngIf="pending_amount?.hasError('min')">
              Pending amount must be greater than 0
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Number of EMIs</mat-label>
            <input matInput type="number" formControlName="number_of_emis" placeholder="Enter number of EMIs">
            <mat-error *ngIf="number_of_emis?.hasError('required')">
              Number of EMIs is required
            </mat-error>
            <mat-error *ngIf="number_of_emis?.hasError('min')">
              Number of EMIs must be at least 1
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Processing Fees</mat-label>
            <input matInput type="number" formControlName="processing_fees" placeholder="Enter processing fees">
            <mat-error *ngIf="processing_fees?.hasError('required')">
              Processing fees is required
            </mat-error>
            <mat-error *ngIf="processing_fees?.hasError('min')">
              Processing fees must be greater than 0
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>EMI Amount</mat-label>
            <input matInput formControlName="emi_amount" placeholder="EMI amount" readonly>
            <mat-error *ngIf="emi_amount?.hasError('required')">
              EMI amount is required
            </mat-error>
            <mat-error *ngIf="emi_amount?.hasError('min')">
              EMI amount must be greater than 0
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>EMI Due Date</mat-label>
            <input matInput [matDatepicker]="emiDueDate" formControlName="emi_due_date">
            <mat-datepicker-toggle matSuffix [for]="emiDueDate"></mat-datepicker-toggle>
            <mat-datepicker #emiDueDate></mat-datepicker>
            <mat-error *ngIf="emi_due_date?.hasError('required')">
              EMI due date is required
            </mat-error>
          </mat-form-field>
        </div>

        <mat-error *ngIf="showErrorMsg" class="error-message">
          {{errorMessage}}
        </mat-error>

        <div class="button-container">
          <button mat-raised-button color="primary" type="submit" 
                  [disabled]="!salesForm.valid">
            Create Record
          </button>
          <button mat-raised-button type="button" (click)="router.navigate(['/dashboard'])">
            Cancel
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div> 