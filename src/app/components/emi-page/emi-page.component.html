<h2>EMI Management</h2>
<p>Welcome, here you can manage and view EMI.</p>

<table mat-table [dataSource]="dataSource" class="mat-elevation-z8" style="width:100%; margin-top: 24px;">
  <!-- Customer Name Column -->
  <ng-container matColumnDef="customer_name">
    <th mat-header-cell *matHeaderCellDef>Customer Name</th>
    <td mat-cell *matCellDef="let emi">{{ emi.sale.customer_name }}</td>
  </ng-container>

  <!-- EMI Amount Column -->
  <ng-container matColumnDef="emi_amount">
    <th mat-header-cell *matHeaderCellDef>EMI Amount</th>
    <td mat-cell *matCellDef="let emi">â‚¹{{ emi.emi_amount }}</td>
  </ng-container>

  <!-- Due Date Column -->
  <ng-container matColumnDef="due_date">
    <th mat-header-cell *matHeaderCellDef>Due Date</th>
    <td mat-cell *matCellDef="let emi">{{ emi.due_date | date:'mediumDate' }}</td>
  </ng-container>

  <!-- Status Column -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let emi">
      <span [ngClass]="{'paid-status': emi.status === 'paid', 'unpaid-status': emi.status === 'unpaid'}">
        {{ emi.status | titlecase }}
      </span>
    </td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let emi">
      <button mat-raised-button color="primary" (click)="markAsPaid(emi)" [disabled]="!isUnpaid(emi)" matTooltip="Mark as Paid">
        Mark as Paid
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of EMI records"></mat-paginator>
